# 전송계층 및 포트

## 4계층 프로토콜

### 4계층에서 하는 일

전송 계층(Transport layer)은 송신자의 **프로세스**와 수신자의 **프로세스**를 **연결하는 통신 서비스**를 제공한다.

✔ 프로세스

* 메모리에서 동작 중인 프로그램



전송 계층은 연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어, 그리고 다중화와 같은 편리한 서비스를 제공한다.

전송 프로토콜 중 가장 잘 알려진 것은 연결 지향 전송 방식을 사용하는 전송 제어 프로토콜(TCP)이다. 

보다 단순한 전송에 사용되는 사용자 데이터 그램 프로토콜(UDP)도 있다.



### 4계층 프로토콜의 종류

안전한 연결을 지향하는 **TCP 프로토콜**

연결이 된 후 데이터를 보내며 데이터를 보낸 후 확인하고 다시 보내거나 다음 것을 보낸다.

![image-20220920204240328](7%EC%9E%A5_%EC%A0%84%EC%86%A1%EA%B3%84%EC%B8%B5_%EB%B0%8F_%ED%8F%AC%ED%8A%B8.assets/image-20220920204240328.png)



안전한 연결을 지향하지 않는 **UDP프로토콜**

![image-20220920204312426](7%EC%9E%A5_%EC%A0%84%EC%86%A1%EA%B3%84%EC%B8%B5_%EB%B0%8F_%ED%8F%AC%ED%8A%B8.assets/image-20220920204312426.png)



## 포트 번호

### 포트 번호의 특징

포트 번호는 특정 프로세스가 사용하는 것으로 컴퓨터가 사용하는 것이 아니다.

특정 프로세스와 특정 프로세스가 통신을 하기 위해 사용한다.

**하나의 포트는 하나의 프로세스만** 사용 가능하다.

하나의 프로세스가 여러 개의 포트를 사용하는 것은 가능하다.

포트 번호는 일반적으로 정해져 있지만 **무조건 지켜야 하는 것은 아니다.**

예를 들어, 일반적으로 웹 서비스는 80번 포트를 사용하지만 웹 서비스가 항상 80번 포트를 사용해야만 하는 것은 아니다.

* 내 컴퓨터를 기준으로 하나의 포트번호는 하나의 프로세스만 실행할 수 있다.
* 상대방 컴퓨터의 여러 프로세스들은 내 컴퓨터의 하나의 포트번호와 연결할 수 있다.



### 크게 3가지로 분류가능

모두 알고 있을 필요는 없다. **But** Well-Known 포트는 알고 있어야한다.

#### Well-Known 포트

전 세계적으로 유명한 **Well-Known 포트**

✔ 웹서버가 사용하는 포트 번호: 80번

✔ Client는 Dynamic 포트 중 하나를 사용한다.

cf) Server는 실행하는 프로그램

![image-20220920205210770](7%EC%9E%A5_%EC%A0%84%EC%86%A1%EA%B3%84%EC%B8%B5_%EB%B0%8F_%ED%8F%AC%ED%8A%B8.assets/image-20220920205210770.png)

**✔✔ HTTP, HTTPS**

예)

https://www.naver.com은 https://www.naver.com.:443이 생략된 것이다.

(웹 브라우저가 자동으로 생략)



#### Registered 포트

조금은 유명한 **Registered 포트**

공신력있는 서비스들이 등록을 해둔 것

![image-20220920210357869](7%EC%9E%A5_%EC%A0%84%EC%86%A1%EA%B3%84%EC%B8%B5_%EB%B0%8F_%ED%8F%AC%ED%8A%B8.assets/image-20220920210357869.png)



#### Dynamic 포트

일반 사용자들이 사용하는 **Dynamic 포트**

Client는 Dynamic 포트 중 하나를 사용한다.

상대방 프로그램으로 연결할 때 내 프로그램이 사용하는 포트 번호

![image-20220920210438951](7%EC%9E%A5_%EC%A0%84%EC%86%A1%EA%B3%84%EC%B8%B5_%EB%B0%8F_%ED%8F%AC%ED%8A%B8.assets/image-20220920210438951.png)

예)

내 컴퓨터의 Chrome이라는 프로그램이 Naver의 웹서버(포트번호 80)과 연결할 때 Dynamic 포트의 포트 번호 중 하나를 사용한다.(포트 번호를 준다.)

* Web을 사용하면 3가지 주소를 모두 사용해야 통신이 가능하다.
  * 포트번호 사용
  * 3계층 주소, IP주소 사용
  * 2계층 주소, MAC주소 사용



## 프로그램의 연결 정보

나와 현재 연결되어 있는 컴퓨터들

현재 포트 활성 여부를 나타내는 **활성 연결 테이블**

`netstat -ano`

![image-20220920211624392](7%EC%9E%A5_%EC%A0%84%EC%86%A1%EA%B3%84%EC%B8%B5_%EB%B0%8F_%ED%8F%AC%ED%8A%B8.assets/image-20220920211624392.png)

