## 네트워크란 무엇인가?

네트워크란?

**노드**들이 데이터를 공유할 수 있게하는 디지털 전기**통신망**의 하나이다.

즉, 분산되어 있는 컴퓨터를 통신망으로 연결한 것을 말한다.

네트워크에서 여러 장치들은 노드 간 연결을 사용하여 서로에게 데이터를 교환한다.

**노드**: 네트워크에 속한 컴퓨터 또는 통신 장비를 뜻하는 말이다.



인터넷이란?

문서, 그림 영상과 같은 여러가지 데이터를 **공유**하도록 구성된 세상에서 가장 큰 전세계를 연결하는 **네트워크**

(네트워크 안에 인터넷이 포함되는 것)

흔히 www를 인터넷으로 착각하는 경우가 많은데 www는 인터넷을 통해 웹과 관련된 데이터를 공유하는 것이다.



## 네트워크의 분류

### 크기에 따른 분류

인터넷 또한 크기에 따른 분류 여러개를 포함하고 있는 것이다.

✔**LAN(Local Area Network)**

LAN은 가까운 지역을 하나로 묶는 네트워크

✔**WAN(Wide Area Network)**

WAN은 멀리 있는 지역을 하나로 묶은 네트워크

가까운 지역끼리 묶인 LAN과 LAN을 다시 하나로 묶은 것

<u>**여러 개**의 LAN을 **서로 연결**한다.</u>

**MAN(Metropolitan Area Network)**

**기타(VLAN, CAN, PAN 등등)**



네트워크 장비인 '스위치' 여기에 LAN선이 뽑혀있다.

IPtime공유기에 공유되어있다.



### 연결 형태에 따른 분류

✔ 중앙 장비에 모든 노드가 연결된 **Star형**

![image-20220830143059639](1,2%EC%9E%A5_%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%99%80_%EB%AA%A8%EB%8D%B8.assets/image-20220830143059639.png)

중앙 장비에 문제가 생기면 연결된 모든 장비를 사용할 수 없다.

LAN대역의 네트워크 들을 서로 연결하는 것처럼 가까운 지역에 있는 컴퓨터들이나 장비들을 서로 연결시킬 때 Star을 많이 사용한다.



✔ 여러 노드들이 서로 그물처럼 연결된 **Mesh형**

여러 개의 네트워크 장비들이 중앙의 한 곳과만 연결되는 것이 아니라 서로 전부 연결이 되어있다.

따라 하나가 고장이 나더라도 다른 선으로 연결되는 것이 가능하다.



마치 나무의 가지처럼 계층 구조로 연결된 **Tree형**

링형, 버스형, 혼합형 등등 **기타**



✔ 실제 인터넷은 여러 형태를 혼합한 형태 **혼합형**

하나의 네트워크 LAN 네트워크 대역으로 연결이 되어 있고 그 다음에 여러 개의 네트워크 대역이 서로 연결되어 있어서 결국에는 하나의  WAN에 속하게 된다.

LAN과 WAN이 이런식으로 혼합형으로 연결되어있다.



## 네트워크의 통신방식

## 네트워크에서 데이터는 어떻게 주고 받는가?

특정 대상이라만 1:1만 통신하는 **유니 캐스트**

* 내가 통신하고 싶은 특정 한 사용자만 통신한다.

특정 다수와 1:N으로 통신하는 **멀티 캐스트**

* 같은 네트워크 대역에서 여러명의 사용자가 있었을 때 특정한 다수와 통신한다.

네트워크에 잇는 모든 대상과 통신하는 **브로드 캐스트**

* 같은 네트워크 대역에 있는 모든 사용자와 모두 통신한다.



## 네트워크 프로토콜

**프로토콜이란?**

프로토콜을 일종의 약속, 양식

네트워크에서 노드와 노드가 통신할 때 **어떤 노드**가 **어느 노드**에게 **어떤 데이터**를 **어떻게** 보내는지 작성하기 위한 양식

각 프로토콜들도 해당 프로토콜만의 양식



### 여러가지 프로토콜

네트워크도 하고 싶은 네트워크 통신 방식에 따라 맞는 프로토콜이 있다.

**가까운 곳과 연락할 때**

* Ethemet프로토콜 (MAC 주소)

**멀리 있는 곳과 연결할 때**

* ICMP
* IPv4
* ARP
* (IP  주소)

**여러가지 프로그램으로 연락할 때**

* TCP, UDP (포트번호)



여러 프로토콜들로 캡슐화 된 **패킷**

* Ethernet
* IPv4
* TCP
* 데이터

이런 프로토콜이 하나로 합쳐진 것이 캡슐화



## 실습

1. 구글과 나는 어떻게 연결되어 있는지 알아보기

구글의 서버와 여러분의 컴퓨터가 어떻게 연결되어 있는지 확인해보기

2. wireshartk 설치

프로토콜이 어떻게 생겼는지 직접 보기 위한 사용할 프로그램을 설치

3. 프로토콜 직접 확인해보기

설치한 Wireshark를 이용해서 현재 컴퓨터에서 인터넷을 통해 주고받고 있는 모든 내용을 직접 확인해보기



## 네트워크 모델의 종류

### TCP/IP 모델

1960년대 말 미국방성의 연구에서 시작되어 1980년대 초 프로토콜 모델로 공개되었다.

현재의 인터넷에서 컴퓨터들이 서로 정보를 주고 받는데 쓰이는 통신 규약(프로토콜)의 모음이다.

![image-20220830180727155](1,2%EC%9E%A5_%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%99%80_%EB%AA%A8%EB%8D%B8.assets/image-20220830180727155.png)

총 4개의 계층으로 이루어져있다.



### OSI 7계층

1984년 네트워크 통신을 체계적으로 다루는 ISO에서 표준으로 지정한 모델

데이터를 주고받을 때 데이터 자체의 흐름을 각 구간별로 나눠 놓은 것이다.

![image-20220830181106036](1,2%EC%9E%A5_%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%99%80_%EB%AA%A8%EB%8D%B8.assets/image-20220830181106036.png)

✔ 실제 네트워크 패킷들을 살펴보면 OSI보다 TCP/IP 모델에 더 맞는 경우가 많다.



### OSI 7계층 모델의 계층별 프로토콜

![image-20220830181234379](1,2%EC%9E%A5_%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%99%80_%EB%AA%A8%EB%8D%B8.assets/image-20220830181234379.png)

프로토콜 중 몇가지는 프로토콜 구조까지 알고 있어야한다.

✔ 2계층: 이더넷

✔ 3계층: IP, ICMP, ARP

✔ 4계층: TCP, UDP

✔ 7계층: HTTP



## 두 모델 비교

TCP/IP와 OSI을 비교

![image-20220830182650133](1,2%EC%9E%A5_%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%99%80_%EB%AA%A8%EB%8D%B8.assets/image-20220830182650133.png)



**공통점**: 네트워크를 계층별로 역할을 지정

**차이점**

OSI 논리적으로 통신전반에 걸쳐서 역할을 나눠놓은 것(논리적)

TCP/IP 네트워크를 통해서 데이터를 전달할 때 그 기술자체를 분류한 것(실무적)

따라서 OSI는 역할 기반 분류, TCP/IP는 프로토콜 기반 분류로 볼 수 있다.

❗ 시험, 면접등에서는 OSI를 더 많이 물어보는 편이다.



## 네트워크를 통해 전달되는 데이터, 패킷

### 패킷이란?

네트워크 상에서 전달되는 데이터를 통칭하는 말

네트워크에서 전달하는 데이터의 형식화된 블록 (블록단위로 되어있다.)

여러 번 포장된 택배 상자

패킷은 <u>제어 정보</u>와 <u>사용자 데이터</u>로 이루어지며 사용자 데이터는 페이로드라고도 한다.

(누가 누구에게 보내는 지, 어떻게 어떤 데이터를 보내는 지, 무엇을 요청하는 지, 무엇을 보내주는 지가 패킷에 들어있다.)

✔ 패킷 프로토콜에도 순서가 있다.



#### 패킷의 형태

여러 프로토콜들이 캡슐화된 패킷

![image-20220830184005435](1,2%EC%9E%A5_%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%99%80_%EB%AA%A8%EB%8D%B8.assets/image-20220830184005435.png)

페이로드: 실질적으로 보내려고 하는 데이터

풋터: 일반적으로 사용빈도가 높지 않다.

**예시**

![image-20220830184118617](1,2%EC%9E%A5_%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%99%80_%EB%AA%A8%EB%8D%B8.assets/image-20220830184118617.png)

(header: Ethernet, (header: IPv4, payload: (header: TCP, payload: HTTP)))

패킷을 payload로 header를 붙여 새로운 패킷을 만든다.



#### Encapsulation

payload에 프로토콜을 header로 붙이는 과정을 캡슐화(encapsulation)라고 한다.

일반적으로 누군가에게 패킷을 보낼 때 사용한다.

![image-20220830184557995](1,2%EC%9E%A5_%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%99%80_%EB%AA%A8%EB%8D%B8.assets/image-20220830184557995.png)

웹서버와 통신하기 위해서 TCP를 encapsulation한다. **TCP(4계층)**

TCP라는 header가 encapsulation된 것이다.

멀리가야하기 때문에 IPv4을 encapsulation한다. **IPv4(3계층)**

먼저 가까운 곳과 통신해야하기 때문에 Ethernet을 encapsulation한다.**Ethernet(2계층)**

✔ Encapsulation 과정을 살펴보면,

TCP/IP와 OSI 7 layer에서 상위계층에서부터 하위계층으로 내려가면서 protocol을 붙이는 것을 알 수 있다.

하위 프로토콜 앞에 상위프로토콜이 올 수 없다.

**\[2계층]\[3계층]\[3계층][data]**같은 구조는 가능하다.



#### Decapsulation

패킷을 받았을 때 프로토콜들을 하나씩 확인하면서 데이터를 확인하는 과정

![image-20220830185606729](1,2%EC%9E%A5_%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%99%80_%EB%AA%A8%EB%8D%B8.assets/image-20220830185606729.png)



#### PDU

계층별로 이름이 다른 PDU

Protocol Data Unit

![image-20220830185704073](1,2%EC%9E%A5_%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%99%80_%EB%AA%A8%EB%8D%B8.assets/image-20220830185704073.png)

통칭하는 패킷외에 붙은 계층에 따라 명칭이 다르다.

**4계층의 PDU = 세그먼트**

**3계층의 PDU = 패킷**

**2계층의 PDU = 프레임**

* 2계층까지 Encapsulation한 패킷



## 실습

1 프로토콜의 캡슐화된 모습과 계층별 프로토콜들을 확인해보기

Wireshark를 이용하여 패킷을 캡쳐해보고 해당 패킷이 어떻게 캡슐화되었는지 자세히 살펴본다.

✔ Wireshark

* ARP
* Ethernet protocol은 Footer을 사용한다.
* 형태: **\[ethernet]\[ARP]\[footer]**

​	✔ Encapsulation때에 같은 계층에서도 순서가 정해진 경우가 있다. (3계층)

​	ICMP

​	IP

​	ARP