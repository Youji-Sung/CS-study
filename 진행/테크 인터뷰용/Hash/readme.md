# 해시

**해시 함수** (짧게는 그냥 **해시**)는 임의의 길이를 갖는 임의의 데이터를 고정된 길이의 데이터로 매핑하는 단방향 함수를 말한다. 

쉽게 말해, 아무리 큰 숫자를 넣더라도 정해진 크기의 숫자가 나오는 함수이다. 예를 들면 어떤 숫자를 10으로 나누었을 때 그 나머지를 구하는 함수도 해시 함수이다

11173816 53328362

# 해시의 활용

이러한 특성에 힘입어 다양한 목적에 맞게 설계된 해시 함수가 존재하며 다음과 같은 다양한 분야에서 매우 유용하게 사용된다.

- 자료구조
  - 해시 테이블 (또는 해시 맵)
  - 해시셋(set)
  - 블룸 필터(Bloom filter)
- 캐시
- 중복 레코드 검색
- 유사 레코드 검색





# 자료구조의 해시

색인(Index)에 해시값을 사용하는 자료 구조로, 정렬을 하지 않고도 빠른 검색, 빠른 삽입이 가능하다.

*파이썬에서 사용하는 dictionary type 이 해시구조입니다.*

![image-20230103205104239](C:\Users\dhkdw\AppData\Roaming\Typora\typora-user-images\image-20230103205104239.png)

- **키 (Key)** : 해시 함수의 input 이 되는 고유한 값.

키(key)는 해시함수(hash function)를 통해 해시(hash)로 변경되어 value 값과 매칭되어 저장소에 저장됩니다.

- **해시 (Hash)** : 임의의 값을 고정 길이로 변환하는 것

*key 값 그대로 저장소에 저장되게 되면 다양한 길이의 저장소를 구성해야하기 때문에 효율성을 위해 일관적으로 해시(hash)로 변경하여 저장함으로써 공간 효율성을 최적화합니다.*

- **해시 테이블 (Hash Table)** : Key 값의 연산에 의해 직접 접근이 가능한 데이터 구조
- **버킷 (Bucket), 슬롯 (Slot)** : Hash table 에서 하나의 데이터가 저장되는 공간
- **해시 함수 (Hashing Function)** : Key 값에 대해 연산을 통해 데이터(value) 위치를 찾는 함수
- **Hash Value, Hask Address** : Key 값을 이용해 Hashing function 을 연산하여 Value 를 알아낼 수 있고, 이를 기반으로 Hash table 에서 해당 key 에 대한 데이터 위치(주소)를 찾을 수 있음

파이썬에서는 dictionary 형태로 이러한 해시 자료구조가 구현되어 있습니다.





## Hash Table 기능

기본적으로 Hash table 은 **몇가지 기본 기능**을 제공합니다.

- **데이터 삽입(저장)**

Hash table 에서 데이터를 저장하기 위해서는 먼저 hach function 을 이용하여 key 값을 hash 로 변경합니다.

이후 미리 준비해둔 저장소(bucket, slot) 중에 알맞는 hash 값을 찾아 value 를 저장합니다.

따라서 이러한 데이터 삽입(저장) 과정의 시간복잡도는 O(1)O(1) 입니다.


- **데이터 삭제**

저장되어 있는 값을 삭제가기 위해서는 bucket 에서 삭제하려고하는 key 와 매칭되는 value 값을 찾아서 삭제합니다.

따라서 이러한 데이터 삭제 과정의 시간복잡도는 O(1)O(1) 입니다.
*해시 충돌이 일어나지 않는다는 가정하에*



- **데이터 검색**

key 를 이용해 value 를 찾아내는 과정입니다. 먼저 key값과 hash function 을 이용해 hash 를 찾아내고 해당 hash 로 value 값을 찾을 수 있습니다.

이러한 데이터 검색 과정의 시간복잡도는 O(1)O(1) 입니다.

hash table 은 위의 기본 기능들이 가능하고 모든 각각의 기능들의 시간복잡도는 O(1)O(1) 로 아주 효율적인 것을 알 수 있습니다.

따라서 hash table 은 데이터 저장, 삭제, 검색이 많이 필요한 경우에 자주 사용됩니다.



하지만 **hash table의 단점** 도 존재합니다.

먼저 hash 값들을 저장할 공간(bucket)을 지정해야하므로 일반적으로 **저장 공간이 많이 필요** 합니다.

또한 여러 key 에 해당하는 hash(주소)가 동일한 경우 해시 충돌 (Hash Collision) 이 발생합니다.





## 해시 충돌(Hash Collision)

위의서 hash table 의 단점으로 언급했던 여러 key 에 해당하는 hash(주소)가 동일한 경우를 **해시 충돌(Hash Collision)**이라고 부릅니다.

*비둘기집의 원리로 인해 hash 를 이용한 자료구조에서는 무조전적으로 일어날 수 밖에 없는 현상입니다.*



비둘기집의 원리란? 간단하게 말해서 n+1개의 물건을 n개의 상자에 넣은 경우, 최소한 한 상자에는 그 물건이 반드시 두 개 이상 들어있다는 원리를 말한다. 보통 비둘기와 비둘기집의 형태로 비유되어 쓰이기 때문에, 비둘기 집의 원리라고 불린다.

![image-20230103205220982](C:\Users\dhkdw\AppData\Roaming\Typora\typora-user-images\image-20230103205220982.png)



## 충돌문제 해결방법

1. **체이닝** : 연결리스트로 노드를 계속 추가해나가는 방식 (제한 없이 계속 연결 가능, but 메모리 문제)
2. **Open Addressing** : 해시 함수로 얻은 주소가 아닌 다른 주소에 데이터를 저장할 수 있도록 허용 (해당 키 값에 저장되어있으면 다음 주소에 저장)
3. **선형 탐사** : 정해진 고정 폭으로 옮겨 해시값의 중복을 피함
4. **제곱 탐사** : 정해진 고정 폭을 제곱수로 옮겨 해시값의 중복을 피함