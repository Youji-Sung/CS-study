## 정의

두 개 이상의 프로세스들이 서로가 가진 자원을 기다리며 중단된 상태



## 원인

4가지 모두 성립해야 데드락이 발생

1. 상호 배제 (Mutual exclusion)

   한 프로세스가 자원을 독점하며 다른 프로세스들은 접근이 불가능

2. 점유 대기 (Hold and wait)

   특정 프로세스가 점유한 자원을 다른 프로세스가 요청하는 상태

3. 비선점 (No preemption)

   다른 프로세스의 자원을 강제적으로 가져올 수 없다

4. 순환 대기 (Circular wait)

   A는 B의 자원을 요구하고, B는 A의 자원을 요구하는 형태로 서로가 서로의 자원을 요구하는 상황





## 처리

1. 예방 (prevention)

   교착 상태 발생 조건 중 하나를 제거하면서 해결 (처리 비용 크다 --> 작업 종료 `응답 없음`)

   - 상호배제 부정 : 여러 프로세스가 공유 자원 사용
   - 점유대기 부정 : 프로세스 실행전 모든 자원을 할당
   - 비선점 부정 : 자원 점유 중인 프로세스가 다른 자원을 요구할 때 가진 자원 반납
   - 순환대기 부정 : 자원에 고유번호 할당 후 순서대로 자원 요구

2. 회피 (avoidance)

   `은행원 알고리즘`

   - 은행에서 모든 고객의 요구가 충족되도록 현금을 할당하는데서 유래함
   - 프로세스가 자원을 요구할 때, 요청할 자원들의 최대치를 통해 자원 할당 가능 여부를 파악한다
   - 안정 상태면 할당, 아니면 다른 프로세스들이 자원을 해지할때까지 대기





## 탐지&회복

교착상태가 발생하도록 허용함

1. 탐지(Detection)

   ![image](https://user-images.githubusercontent.com/97648258/228504853-3c7a7865-b472-41ee-bc00-153f378da667.png)

   - `자원 할당 그래프`를 통해 교착 상태를 탐지한다
   - `사이클`을 형성하면 교착상태
   - `대기 그래프`는 `자원 할당 그래프`에서 자원노드를 제거하여 만든 것

2. 회복 (Recovery)

   1. 프로세스 종료
      1. 교착상태의 프로세스 모두 중지
      2. 교착 상태가 제거될 때까지 프로세스 하나씩 중지
   2. 자원 선점
      1. 교착상태의 프로세스의 자원을 선점해 다른 프로세스에 할당 (해당 프로세스는 일시정지)
      2. 우선 순위가 낮은 프로세스나 수행 횟수 적은 프로세스 위주로 자원을 선점

   - 기아상태(Starvation) 출현이 있다

     특정 프로세스의 우선 순위가 낮아서 원하는 자원을 계속 할당받지 못하는 상태

     > [식사하는철학자문제](https://velog.io/@minseojo/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%8B%9D%EC%82%AC%ED%95%98%EB%8A%94-%EC%B2%A0%ED%95%99%EC%9E%90-%EB%AC%B8%EC%A0%9C)
     >
     > 1. n명이 앉을 수 있는 테이블에 n-1 명 앉힌다 or 젓가락 개수를 늘린
     > 2. 누군가는 왼쪽 젓가락을 먼저 집지 않고 오른쪽 젓가락을 먼저 집도록 허용









*참고*

- https://nanahkim.tistory.com/5 
- https://velog.io/@minseojo/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%8B%9D%EC%82%AC%ED%95%98%EB%8A%94-%EC%B2%A0%ED%95%99%EC%9E%90-%EB%AC%B8%EC%A0%9C