## 메모리 할당

메모리에 프로그램을 할당할 때, `메모리 위치`, `메모리의 할당 크기`를 기반으로 할당한다

- 할당: 다중 프로그래밍 시스템에서 다수의 프로세스를 수용하기 위해



## 연속 할당

메모리에 '연속적으로' 공간을 할당하는 것

프로그램 전체가 하나의 커다란 공간에 연속적으로 할당된다

![image](https://user-images.githubusercontent.com/97648258/230031239-838ed9f0-686a-4773-82c2-f7bc7f052331.png)

### 고정 분할 방식

- 메모리를 미리 나누어 관리하는 방식

  - 융통성이 없다

- 내부 단편화 발생

  > 내부 단편화: 메모리를 나눈 크기보다 프로그램이 작아서 들어가지 못하는 공간이 발생하는 현상
  >
  > '100'으로 나눴는데 '80'크기를 갖는 프로그램을 배치하였을 경우 '20'의 공간이 내부 단편화 공간이 된다

### 가변 분할 방식

- 매 시점 프로그램의 크기에 맞게 동적으로 메모리를 나눠 사용

  - 기술적으로 관리할 수 있는 기법이 필요

- 외부 단편화 발생

  - 사용중인 프로세스 종료 시 메모리에 새로운 프로세스를 할당할 공간이 충분하지 않을 때

  > 외부 단편화: 메모리를 나눈 크기보다 프로그램이 커서 들어가지 못하는 공간이 발생하는 현상
  >
  > '100' 크기를 갖는 메모리에 '120' 크기의 프로그램은 배치되지 못하고 '100'의 공간이 외부 단편화 공간이 된다

  | 최초적합 | 위쪽이나 아래쪽부터 시작해서 홀을 찾으면 바로 할당   |
  | -------- | ---------------------------------------------------- |
  | 최적적합 | 프로세스의 크기 이상인 공간 중 가장 작은 홀부터 할당 |
  | 최악적합 | 프로세스의 크기와 가장 많이 차이가 나는 홀에 할당    |

  - 컴팩션
    - 물리적 메모리 중에서 사용중인 메모리 공간을 한쪽으로 몰고 가용 공간을 확보하는 방법
    - 메모리를 효율적으로 사용할 수 있는 측면에서는 좋은 선택이지만 수행중인 프로세스의 메모리 주소 공간을 이동시켜야 하므로 비용이 매우 많이 든다





## 불연속 할당

메모리를 동일한 크기의 페이지로 나누고 프로그램마다 페이지 테이블을 두어 이를 통해 메모리에 프로그램을 할당

> 페이지 테이블: 논리주소의 페이지를 물리주소의 프레임으로 매핑시켜주는 정보를 담고 있는 테이블



### 페이징

![image](https://user-images.githubusercontent.com/97648258/230039882-8b5d6897-743a-45d1-b0f9-a45e28ed2da7.png)

- 동일한 크기의 페이지 단위로 나누어 메모리의 서로 다른 위치에 프로세스를 할당

- 홀의 크기가 균일하지 않은 문제가 없어지지만, 주소 변환이 복잡해진다

> 홀: 할당할 수 있는 비어 있는 메모리 공간

- 내부 단편화 발생

### 세그멘테이션

![image](https://user-images.githubusercontent.com/97648258/230040608-3ff9769d-c196-4fcd-97c4-1746dcecf8a0.png)

- 페이지 단위가 아닌 의미 단위인 `세그먼트`로 나누는 방식

- 코드, 데이터, 함수 단위 등으로 나눌 수 있다
- 공유와 보안 측면에서 좋다
- 홀 크기가 균일하지 않은 문제 발생
- 외부 단편화 발생
  - 메모리 낭비
  - 다양한 세그먼트의 크기 때문에 다양한 hole 발생 --> 페이징 기법을 더 많이 사용한다



### 페이지드 세그멘테이션

- `공유`나 `보안`을 의미 단위의 세그먼트로 나누고, 물리적 메모리는 페이지로 나누는 것









## 참고

- 면접을 위한 CS 전공지식 노트
- https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Operating%20System/Paging%20and%20Segmentation.md
- https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Operating%20System/Paging%20and%20Segmentation.pdf
- [내부&외부단편화](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=ssuniversity&logNo=100173769081)
- [페이지테이블](https://code-lab1.tistory.com/55)
- [세그멘테이션](https://code-lab1.tistory.com/57)
- [압축](https://zangzangs.tistory.com/133)